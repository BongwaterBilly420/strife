(function(n,t,r,o,s){"use strict";const{getSerializedState:l}=r.findByProps("getSerializedState"),{getCurrentUser:u}=r.findByStoreName("UserStore");function a(){try{u().flags+=1,t.FluxDispatcher._actionHandlers._computeOrderedActionHandlers("OVERLAY_INITIALIZE").filter(function(e){return e.name.includes("Experiment")}).forEach(function(e){let{actionHandler:f}=e;return f({serializedExperimentStore:l(),user:{flags:1}})})}catch(e){s.logger.error("Experiments: Failed to enable experiments...",e)}}function i(){t.FluxDispatcher.unsubscribe("CONNECTION_OPEN",i),a()}const{getCurrentUser:c}=r.findByStoreName("UserStore");c()?a():t.FluxDispatcher.subscribe("CONNECTION_OPEN",i);const d=function(){return o.showConfirmationAlert({title:"Wait!",content:"Disabling experiments requires a restart - would you like to do that now?",confirmText:"Sure",cancelText:"Not now",confirmColor:"red",onConfirm:t.ReactNative.NativeModules.BundleUpdaterManager.reload})};return n.onUnload=d,n})({},vendetta.metro.common,vendetta.metro,vendetta.ui.alerts,vendetta);
