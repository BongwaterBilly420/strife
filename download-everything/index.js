(function(d,v,c,$,f,b,s,E,m,R,C){"use strict";const{ScrollView:D,View:T}=b.General,{FormDivider:F,FormIcon:N,FormSwitchRow:G}=b.Forms,{TableRowGroup:V}=c.findByProps("TableRowGroup"),P=[{title:"General",children:[{name:"Voice Messages (WIP)",action:"Tap and hold",icon:"ic_speaker",key:"voice_messages"},{name:"Stickers (WIP)",action:"Tap and hold",icon:"ic_sticker_24px",key:"stickers"},{name:"Emojis (WIP)",action:"Tap and hold",icon:"img_nitro_emojis",key:"emojis"}]},{title:"Server",children:[{name:"Icon",action:"Tap on server name > View Icon",icon:"ic_image",key:"guild_icon"},{name:"Banner",action:"Tap on server name > View Banner",icon:"ic_image",key:"guild_banner"},{name:"Invite Background",action:"Tap on server name > View Invite Background",icon:"ic_image",key:"guild_invite_background"}]},{title:"User",children:[{name:"Avatar (WIP)",action:"Tap and hold",icon:"ic_image",key:"user_avatar"},{name:"Banner (WIP)",action:"Tap and hold",icon:"ic_image",key:"user_banner"}]}];function O(){$.useProxy(o);for(const e of P)for(const t of e.children)o[t.key]??=!0;return React.createElement(D,null,React.createElement(T,{style:{marginTop:16,marginHorizontal:16}},...P.map(function(e){return React.createElement(T,{style:{marginBottom:16}},React.createElement(V,{title:e.title,hasIcons:!1},...e.children.map(function(t){return React.createElement(React.Fragment,null,React.createElement(G,{label:t.name,subLabel:t.action,leading:React.createElement(N,{source:f.getAssetIDByName(t.icon)}),onValueChange:function(r){return o[t.key]=r},value:o[t.key]}),React.createElement(F,null))})))})))}const h="https://cdn.discordapp.com/";function _(e){return`${e}.${x(e)}?size=4096`}function x(e){return e.startsWith("a_")?"gif":"png"}const{FormDivider:L,FormLabel:W}=b.Forms,{View:A}=b.General;c.findByProps("showShareActionSheet");const{showSimpleActionSheet:j}=c.findByProps("showSimpleActionSheet"),{downloadMediaAsset:z}=c.findByProps("downloadMediaAsset"),{isAndroid:M}=c.findByProps("isAndroid");async function S(e,t,r){const i=e.split("/").reverse()[0];j({key:"CardOverflow",header:{title:`${t} for ${r}`,onClose:function(){return l.hideActionSheet()}},options:[{label:"Copy",icon:f.getAssetIDByName("copy"),onPress:function(){l.hideActionSheet(),s.clipboard.setString(e),R.showToast(`${t} Copied!`,f.getAssetIDByName("toast_copy_link"))}},{label:"Save",icon:f.getAssetIDByName("ic_download_24px"),onPress:function(){l.hideActionSheet(),z(e,i.endsWith("gif")?1:0)}},{label:"Share",icon:f.getAssetIDByName(`ic_share_${M()?"android":"ios"}`),disabled:!0,enabled:!1,onPress:function(){R.showToast("Sharing not supported yet!",f.getAssetIDByName("Fail"))}},{label:"Open in Browser",icon:f.getAssetIDByName("ic_open_in_browser"),onPress:function(){c.common.url.openURL(e),l.hideActionSheet()}}]})}function U(e){let{content:t}=e;const r=[];for(let i=0;i<t.length;i++){const n=t[i];r.push(s.React.createElement(s.ReactNative.Pressable,{style:{alignItems:"center",flexDirection:"row",justifyContent:"flex-start",paddingHorizontal:16,paddingVertical:16},accessibilityRole:"button",accessibilityState:{disabled:!1},accessible:!0,disabled:!1,onPress:n.onClick},s.React.createElement(A,{style:{flexBasis:"30%",flexGrow:1,flexShrink:1}},s.React.createElement(W,{text:n.text})))),i!==t.length-1&&r.push(s.React.createElement(L,null))}return s.React.createElement(A,{style:{paddingHorizontal:16,paddingTop:16}},s.React.createElement(A,{style:{backgroundColor:B.meta.resolveSemanticColor(k.theme,E.semanticColors.BACKGROUND_TERTIARY),borderRadius:4,overflow:"hidden"}},...r))}function H(e){if(!o.user_avatar&&!o.user_banner)return;let t=v.after("type",e.default,function(r,i){if(t&&(t(),t=void 0),!m.findInReactTree(i,function(y){return Array.isArray(y?.children)}))return;console.log(c.findByProps("format","inspect").inspect(i,{depth:1/0}));const n=m.findInReactTree(i,function(y){return typeof y?.type=="function"&&y.type.name==="DisplayBanner"});if(!n)return;console.log(n),n.props.onPress=function(){return console.log("onPress")},n.props.onTouch=function(){return console.log("onTouch")},n.props.onClick=function(){return console.log("onClick")},n.props.onTap=function(){return console.log("onTap")},n.props.onTapGaySex=function(){return console.log("onTapGaySex")};const g=m.findInReactTree(i,function(y){return typeof y?.displayProfile=="object"});if(!g)return;const{displayProfile:u,user:a}=g;if(!u||!a)return;const p=a.discriminator==="0",w=a.guildMemberAvatars[u.guildId]??a.avatar;o.user_avatar&&w?`${h}${a.id}${_(w)}`:(`${h}`,p?(parseInt(a.id)>>22)%6:parseInt(a.discriminator)%5),o.user_banner&&u.banner&&`${h}${a.id}${_(u.banner)}`},!0)}function Y(e){!o.guild_banner&&!o.guild_icon&&!o.guild_invite_background||v.after("default",e,function(t,r){const i=m.findInReactTree(r,function(p){return Array.isArray(p?.children)})?.children;if(!i)return;const n=m.findInReactTree(r,function(p){return typeof p?.guild=="object"})?.guild;if(!n)return;const g=o.guild_icon&&n.icon&&`${h}icons/${n.id}/${_(n.icon)}`,u=o.guild_banner&&n.banner&&`${h}banners/${n.id}/${_(n.banner)}`,a=o.guild_invite_background&&n.splash&&`${h}splashes/${n.id}/${_(n.splash)}`;!g&&!u&&!a||i.splice(2,0,s.React.createElement(U,{content:[g&&{text:"View Icon",onClick:function(){S(g,"Icon",n.name),l.hideActionSheet()}},u&&{text:"View Banner",onClick:function(){S(u,"Banner",n.name),l.hideActionSheet()}},a&&{text:"View Server Invite",onClick:function(){S(a,"Server Invite",n.name),l.hideActionSheet()}}].filter(function(p){return!!p})}))},!0)}const l=c.findByProps("openLazy","hideActionSheet"),K=c.findByProps("PRIMARY_INFO_TOP_OFFSET","SECONDARY_INFO_TOP_MARGIN","SIDE_PADDING"),k=c.findByStoreName("ThemeStore"),B=c.findByProps("colors","meta"),o=C.storage;let I=[];var q={onLoad:function(){I.push(v.before("openLazy",l,function(e){const[t,r,i]=e;!t||typeof r!="string"||typeof i!="object"||(r.startsWith("UserProfile")?t.then(H):r.startsWith("GuildProfile:")&&t.then(Y))}))},onUnload:function(){for(const e of I)e();I=[]},settings:O};return d.Colors=B,d.LazyActionSheet=l,d.ThemeStore=k,d.UserProfile=K,d.default=q,d.vstorage=o,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.patcher,vendetta.metro,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.metro.common,vendetta.ui,vendetta.utils,vendetta.ui.toasts,vendetta.plugin);
