(function(u,r,e,y,f,w,g,c,l,p){"use strict";const{FormRow:d}=l.Forms;function P(t){let{plugin:n,forceUpdate:a}=t;const s=c.getSettings(n.id),i=e.NavigationNative.useNavigation();return e.React.createElement(d,{label:n.manifest.name,leading:e.React.createElement(d.Icon,{source:p.getAssetIDByName(n.manifest.vendetta?.icon??"ic_application_command_24px")}),trailing:d.Arrow,onPress:function(){return n.enabled?i.push("VendettaCustomPage",{title:n.manifest.name,render:s}):a()}})}const{FormSection:S,FormDivider:h}=l.Forms;function m(){g.useProxy(r.storage);const t=Object.keys(r.storage.pinnedPlugins),n=window.hasOwnProperty("enmity")||window.hasOwnProperty("Aliucord"),[,a]=e.React.useReducer(function(i){return~i},0);if(t.length===0)return null;const s=t.filter(function(i){return c.plugins[i]&&c.plugins[i].enabled}).map(function(i,o){return e.React.createElement(e.React.Fragment,null,e.React.createElement(P,{plugin:c.plugins[i],forceUpdate:a}),o!==t.length-1&&e.React.createElement(h,null))});return r.storage.appendExisting?e.React.createElement(l.ErrorBoundary,null,s):e.React.createElement(l.ErrorBoundary,null,e.React.createElement(S,{key:"PinSettingsPlugins",title:`${n?"Vendetta ":""}Plugins`},s))}const F=y.findByName("UserSettingsOverviewWrapper",!1);function I(){const t=new Array,n=f.after("default",F,function(a,s){const i=w.findInReactTree(s.props.children,function(o){return o.type&&o.type.name==="UserSettingsOverview"});t.push(f.after("render",i.type.prototype,function(o,T){let{props:{children:E}}=T;const M=[e.i18n.Messages.BILLING_SETTINGS,e.i18n.Messages.PREMIUM_SETTINGS],v=E.findIndex(function(V){return M.includes(V.props.title)});E.splice(v===-1?4:v,0,React.createElement(m,null))})),n()});return function(){return t.forEach(function(a){return a()})}}const{FormRow:b,FormRadioRow:N}=l.Forms;function x(t){let{name:n,id:a}=t;const s=r.storage.pinnedPlugins[a];return React.createElement(N,{label:n,trailing:b.Arrow,selected:s,onPress:function(){s?delete r.storage.pinnedPlugins[a]:r.storage.pinnedPlugins[a]=!0}})}const{FormRow:_,FormSection:R,FormSwitchRow:A,FormDivider:B}=l.Forms;function O(){return g.useProxy(r.storage),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},e.React.createElement(R,{title:"Options",titleStyleType:"no_border"},e.React.createElement(A,{label:"Append to Vendetta section",subLabel:"May be incompatible with other client mods.",leading:e.React.createElement(_.Icon,{source:p.getAssetIDByName("ic_edit_24px")}),value:r.storage.appendExisting,onValueChange:function(t){r.storage.appendExisting=t}})),e.React.createElement(R,{title:"Plugins"},e.React.createElement(e.ReactNative.FlatList,{data:Object.values(c.plugins).filter(function(t){return c.getSettings(t.id)}),ItemSeparatorComponent:B,renderItem:function(t){let{item:n}=t;return e.React.createElement(x,{name:n.manifest.name,id:n.id})}})))}r.storage.pinnedPlugins??={},r.storage.appendExisting??=!1;const U=[I()],$=function(){return U.forEach(function(t){return t()})};return u.onUnload=$,u.settings=O,u})({},vendetta.plugin,vendetta.metro.common,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.storage,vendetta.plugins,vendetta.ui.components,vendetta.ui.assets);
