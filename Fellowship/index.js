(function(D,l,i,P,r,u,c){"use strict";const b=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(t){return typeof t=="object"&&!Array.isArray(t)};return[e,n(e[e.length-1])?e.pop():{}]},g=function(e,n){return n.all?r.findAll(e):r.find(e)},C=function(e){return g(e,{all:!0})},y={byProps:function(e){return function(n){return e.every(function(t){return n[t]!==void 0})}},byDisplayName:function(e,n){return n?function(t){return t?.displayName===e}:function(t){return t?.default?.displayName===e}},byTypeName:function(e,n){return n?function(t){return t?.type?.name===e}:function(t){return t?.default?.type?.name===e}},byName:function(e,n){return n?function(t){return t?.name===e}:function(t){return t?.default?.name===e}}};var z=Object.freeze({__proto__:null,filters:y,getByDisplayName:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s,a]=b(n);return g(y.byDisplayName(s[0],a.default),a)},getByName:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s,a]=b(n);return g(y.byName(s[0],a.default),a)},getByProps:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s,a]=b(n);return g(y.byProps(s),a)},getByTypeName:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s,a]=b(n);return g(y.byTypeName(s[0],a.default),a)},getModule:g,getModules:C});const R=r.common.constants,k=r.common.clipboard,$=r.findByProps("registerAsset"),x=r.findByProps("recieveMessage","sendMessage"),L=r.findByProps("createBotMessage"),E=r.findByProps("BOT_AVATARS"),O=r.common.ReactNative.NativeModules,U=r.common.React,j=r.common.FluxDispatcher,F=r.findByProps("getItem"),G=r.common.toasts,H=r.findByProps("show","openLazy","close"),V=r.findByProps("getToken"),K=r.findByProps("getAPIBaseURL"),q=r.findByProps("watchKeys"),J=r.findByProps("getCurrentUser"),Q=r.findByProps("getUser","fetchProfile"),W=r.common.navigation,X=r.common.NavigationNative,Y=r.findByProps("theme"),Z=r.common.ReactNative.Linking,ee=r.common.stylesheet,ne={ThemeColorMap:u.semanticColors,Colors:u.rawColors},te={Forms:P.Forms,General:P.General},re=r.findByProps("Messages"),ae=r.findByProps("showUserProfile"),se=r.findByProps("debounce","throttle"),ie=r.findByName("Logger"),oe=r.common.Flux,ue=r.findByProps("Svg"),le=r.findByName("getScreens",!1),ce=r.common.moment;var ge=Object.freeze({__proto__:null,Assets:$,AsyncUsers:Q,Avatars:E,Clipboard:k,Clyde:L,ColorMap:ne,Components:te,Constants:R,Dialog:H,Dispatcher:j,Flux:oe,Linking:Z,Locale:re,Lodash:se,Logger:ie,Messages:x,Moment:ce,Native:O,Navigation:W,NavigationNative:X,Profiles:ae,REST:K,React:U,SVG:ue,Scenes:le,Settings:q,Storage:F,StyleSheet:ee,Theme:Y,Toasts:G,Token:V,Users:J});const f={};function v(e,n,t){f[e]||(f[e]={before:[],instead:[],after:[]}),f[e][n].push(t)}function B(e,n,t){var s=this;switch(e){case"before":return function(a){return n(s,a,t)};case"instead":return function(a,m){return n(s,a,m)};case"after":return function(a,m){return n(s,a,m)}}}const S=function(e,n,t,s,a){return v(e,"before",i.patcher.before(t,n,B("before",s,n?.[t]),a))},w=function(e,n,t,s,a){return v(e,"instead",i.patcher.instead(t,n,B("instead",s),a))},I=function(e,n,t,s,a){return v(e,"after",i.patcher.after(t,n,B("after",s),a))},N=function(e){return[...f[e].before,...f[e].instead,...f[e].after]},_=function(e){return N(e).forEach(function(n){return n()})};var fe=Object.freeze({__proto__:null,after:I,before:S,create:function(e){return{getPatchesByCaller:function(){return N(e)},before:S,instead:w,after:I,unpatchAll:_}},getPatchesByCaller:N,instead:w,unpatchAll:_});function p(e,n){return i.logger.warn(`Tried to call ${e}, not implemented!`),n}const T=l.storage.plugins,d=l.storage.enabledPlugins,o=l.storage.disabledPlugins;function de(e){typeof e=="object"&&(e.onEnable=function(){try{e.onStart()}catch(n){i.logger.error(`${e.name} failed to load...`,n)}},e.onDisable=function(){try{e.patches?.forEach(function(n){return n.unpatchAll()}),e.onStop()}catch(n){i.logger.error(`${e.name} errored while disabling...`,n)}},d.includes(e.name)&&e.onEnable(),o.includes(e.name)&&e.onDisable(),h(e.name)||T.push(e))}const h=function(e){return T.find(function(n){return n.name===e})},ye=function(){return T},pe=function(){return d},me=function(){return o};function Pe(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2?arguments[2]:void 0;return d.includes(e)&&d.splice(d.indexOf(e),1),n&&o.includes(e)&&o.splice(o.indexOf(e),1),n||o.push(e),h(e).onDisable(),new Promise(function(s){t?.("disabled-plugin"),s("disabled-plugin")})}function be(e,n){return o.includes(e)&&o.splice(o.indexOf(e),1),d.push(e),h(e).onEnable(),new Promise(function(t){n?.("enabled-plugin"),t("enabled-plugin")})}var he=Object.freeze({__proto__:null,disablePlugin:Pe,enablePlugin:be,evalPlugin:async function(){return p("evalPlugin","")},getDisabledPlugins:me,getEnabledPlugins:pe,getPlugin:h,getPlugins:ye,installPlugin:async function(){return p("installPlugin")},registerPlugin:de,uninstallPlugin:async function(){return p("uninstallPlugin")}});const{uuid4:ve}=r.findByProps("uuid4"),Be=function(e){return c.lodash.memoize(e)},Ne=function(e,n){return c.lodash.debounce(e,n)},Te=function(){return p("createStore",{})},Ae=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s){return s},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i.utils.findInTree(e,n,{walkable:["props","children"],...t})},De=c.ReactNative.PixelRatio.getPixelSizeForLayoutSize;var Se=Object.freeze({__proto__:null,createStore:Te,debounce:Ne,findInReactTree:Ae,findInTree:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(m){return m},{ignore:t=[],walkable:s=[],maxProperties:a=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i.utils.findInTree(e,n,{ignore:t,walkable:s,maxDepth:a})},memoize:Be,normalizeSize:De,sleep:function(e){return new Promise(function(n){return setTimeout(n,e)})},uuid:ve,wrapInHooks:function(){return p("wrapInHooks",c.React.createElement(c.ReactNative.Text,{},"Stubbed wrapInHooks"))}});const{InfoDictionaryManager:A,BundleUpdaterManager:we,DCDDeviceManager:M}=c.ReactNative.NativeModules,Ie=A.Identifier,_e=we.reload,Me=A.Version,Ce=M.systemVersion,ze=A.Build,Re=M.device;var ke=Object.freeze({__proto__:null,build:ze,bundle:Ie,device:Re,os:Ce,reload:_e,version:Me});const $e=u.assets.all,xe=u.assets.find,Le=function(e){return u.assets.getAssetByName(e)},Ee=function(e){return u.assets.getAssetByID(e)},Oe=function(e){return u.assets.getAssetIDByName(e)},Ue=new Proxy({},{get:function(e,n){return u.assets.getAssetIDByName(n)}});var je=Object.freeze({__proto__:null,Icons:Ue,assets:$e,find:xe,getByID:Ee,getByName:Le,getIDByName:Oe});function Fe(){return globalThis.enmity={modules:{...z,common:ge},patcher:fe,version:`Fellowship ${i.plugin.manifest.hash.slice(7)}`,plugins:he,utilities:Se,components:new Proxy({},{get:function(e,n){return P.General[n]??P.Forms[n]}}),native:ke,assets:je},function(){return delete globalThis.enmity}}Array.isArray(l.storage.plugins)||(l.storage.plugins=[]),l.storage.enabledPlugins??=[],l.storage.disabledPlugins??=[];const Ge=[Fe()],He=function(){return Ge.forEach(function(e){return e()})};return D.onUnload=He,D})({},vendetta.plugin,vendetta,vendetta.ui.components,vendetta.metro,vendetta.ui,vendetta.metro.common);
