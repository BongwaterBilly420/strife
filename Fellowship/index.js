(function(S,l,i,b,r,u,c){"use strict";const h=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(t){return typeof t=="object"&&!Array.isArray(t)};return[e,n(e[e.length-1])?e.pop():{}]},g=function(e,n){return n.all?r.findAll(e):r.find(e)},z=function(e){return g(e,{all:!0})},y={byProps:function(e){return function(n){return e.every(function(t){return n[t]!==void 0})}},byDisplayName:function(e,n){return n?function(t){return t?.displayName===e}:function(t){return t?.default?.displayName===e}},byTypeName:function(e,n){return n?function(t){return t?.type?.name===e}:function(t){return t?.default?.type?.name===e}},byName:function(e,n){return n?function(t){return t?.name===e}:function(t){return t?.default?.name===e}}};var $=Object.freeze({__proto__:null,filters:y,getByDisplayName:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s,a]=h(n);return g(y.byDisplayName(s[0],a.default),a)},getByName:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s,a]=h(n);return g(y.byName(s[0],a.default),a)},getByProps:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s,a]=h(n);return g(y.byProps(s),a)},getByTypeName:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s,a]=h(n);return g(y.byTypeName(s[0],a.default),a)},getModule:g,getModules:z});const k=r.common.constants,x=r.common.clipboard,L=r.findByProps("registerAsset"),E=r.findByProps("recieveMessage","sendMessage"),O=r.findByProps("createBotMessage"),U=r.findByProps("BOT_AVATARS"),j=r.common.ReactNative.NativeModules,F=r.common.React,G=r.common.FluxDispatcher,H=r.findByProps("getItem"),V=r.common.toasts,K=r.findByProps("show","openLazy","close"),q=r.findByProps("getToken"),J=r.findByProps("getAPIBaseURL"),Q=r.findByProps("watchKeys"),W=r.findByProps("getCurrentUser"),X=r.findByProps("getUser","fetchProfile"),Y=r.common.navigation,Z=r.common.NavigationNative,ee=r.findByProps("theme"),ne=r.common.ReactNative.Linking,te=r.common.stylesheet,re={ThemeColorMap:u.semanticColors,Colors:u.rawColors},ae={Forms:b.Forms,General:b.General},se=r.findByProps("Messages"),ie=r.findByProps("showUserProfile"),oe=r.findByProps("debounce","throttle"),ue=r.findByName("Logger"),le=r.common.Flux,ce=r.findByProps("Svg"),ge=r.findByName("getScreens",!1),fe=r.common.moment;var de=Object.freeze({__proto__:null,Assets:L,AsyncUsers:X,Avatars:U,Clipboard:x,Clyde:O,ColorMap:re,Components:ae,Constants:k,Dialog:K,Dispatcher:G,Flux:le,Linking:ne,Locale:se,Lodash:oe,Logger:ue,Messages:E,Moment:fe,Native:j,Navigation:Y,NavigationNative:Z,Profiles:ie,REST:J,React:F,SVG:ce,Scenes:ge,Settings:Q,Storage:H,StyleSheet:te,Theme:ee,Toasts:V,Token:q,Users:W});const f={};function B(e,n,t){f[e]||(f[e]={before:[],instead:[],after:[]}),f[e][n].push(t)}function N(e,n,t){var s=this;switch(e){case"before":return function(a){return n(s,a,t)};case"instead":return function(a,P){return n(s,a,P)};case"after":return function(a,P){return n(s,a,P)}}}const I=function(e,n,t,s,a){return B(e,"before",i.patcher.before(t,n,N("before",s,n?.[t]),a))},w=function(e,n,t,s,a){return B(e,"instead",i.patcher.instead(t,n,N("instead",s),a))},M=function(e,n,t,s,a){return B(e,"after",i.patcher.after(t,n,N("after",s),a))},T=function(e){return[...f[e].before,...f[e].instead,...f[e].after]},_=function(e){return T(e).forEach(function(n){return n()})};var ye=Object.freeze({__proto__:null,after:M,before:I,create:function(e){return{getPatchesByCaller:function(){return T(e)},before:I,instead:w,after:M,unpatchAll:_}},getPatchesByCaller:T,instead:w,unpatchAll:_});function p(e,n){return i.logger.warn(`Tried to call ${e}, not implemented!`),n}const C=function(e,n){return new Promise(function(t){n?.(e),t(e)})},D=l.storage.plugins,d=l.storage.enabledPlugins,o=l.storage.disabledPlugins;function pe(e){typeof e=="object"&&(e.onEnable=function(){try{e.onStart()}catch(n){i.logger.error(`${e.name} failed to load...`,n)}},e.onDisable=function(){try{e.patches?.forEach(function(n){return n.unpatchAll()}),e.onStop()}catch(n){i.logger.error(`${e.name} errored while disabling...`,n)}},d.includes(e.name)&&e.onEnable(),o.includes(e.name)&&e.onDisable(),v(e.name)||D.push(e))}const v=function(e){return D.find(function(n){return n.name===e})},me=function(){return D},Pe=function(){return d},be=function(){return o};function he(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2?arguments[2]:void 0;return d.includes(e)&&d.splice(d.indexOf(e),1),n&&o.includes(e)&&o.splice(o.indexOf(e),1),n||o.push(e),v(e).onDisable(),C("disabled-plugin",t)}function ve(e,n){return o.includes(e)&&o.splice(o.indexOf(e),1),d.push(e),v(e).onEnable(),C("enabled-plugin",n)}var Be=Object.freeze({__proto__:null,disablePlugin:he,enablePlugin:ve,evalPlugin:async function(){return p("evalPlugin","")},getDisabledPlugins:be,getEnabledPlugins:Pe,getPlugin:v,getPlugins:me,installPlugin:async function(){return p("installPlugin")},registerPlugin:pe,uninstallPlugin:async function(){return p("uninstallPlugin")}});const{uuid4:Ne}=r.findByProps("uuid4"),Te=function(e){return c.lodash.memoize(e)},De=function(e,n){return c.lodash.debounce(e,n)},Ae=function(){return p("createStore",{})},Se=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s){return s},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i.utils.findInTree(e,n,{walkable:["props","children"],...t})},Ie=c.ReactNative.PixelRatio.getPixelSizeForLayoutSize;var we=Object.freeze({__proto__:null,createStore:Ae,debounce:De,findInReactTree:Se,findInTree:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(P){return P},{ignore:t=[],walkable:s=[],maxProperties:a=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i.utils.findInTree(e,n,{ignore:t,walkable:s,maxDepth:a})},memoize:Te,normalizeSize:Ie,sleep:function(e){return new Promise(function(n){return setTimeout(n,e)})},uuid:Ne,wrapInHooks:function(){return p("wrapInHooks",c.React.createElement(c.ReactNative.Text,{},"Stubbed wrapInHooks"))}});const{NativeModules:m}=c.ReactNative,A=m.InfoDictionaryManager??m.RTNClientInfoManager,R=m.DCDDeviceManager??m.RTNDeviceManager,Me=m.BundleUpdaterManager,_e=A.Identifier,Ce=Me.reload,Re=A.Version,ze=R.systemVersion,$e=A.Build,ke=R.device;var xe=Object.freeze({__proto__:null,build:$e,bundle:_e,device:ke,os:ze,reload:Ce,version:Re});const Le=u.assets.all,Ee=u.assets.find,Oe=function(e){return u.assets.getAssetByName(e)},Ue=function(e){return u.assets.getAssetByID(e)},je=function(e){return u.assets.getAssetIDByName(e)},Fe=new Proxy({},{get:function(e,n){return u.assets.getAssetIDByName(n)}});var Ge=Object.freeze({__proto__:null,Icons:Fe,assets:Le,find:Ee,getByID:Ue,getByName:Oe,getIDByName:je});function He(){return globalThis.enmity={modules:{...$,common:de},patcher:ye,version:`Fellowship ${i.plugin.manifest.hash.slice(7)}`,plugins:Be,utilities:we,components:new Proxy({},{get:function(e,n){return b.General[n]??b.Forms[n]}}),native:xe,assets:Ge},function(){return delete globalThis.enmity}}Array.isArray(l.storage.plugins)||(l.storage.plugins=[]),l.storage.enabledPlugins??=[],l.storage.disabledPlugins??=[];const Ve=[He()],Ke=function(){return Ve.forEach(function(e){return e()})};return S.onUnload=Ke,S})({},vendetta.plugin,vendetta,vendetta.ui.components,vendetta.metro,vendetta.ui,vendetta.metro.common);
